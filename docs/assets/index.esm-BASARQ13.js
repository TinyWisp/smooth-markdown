import{k as y,i as N,m as P,n as H,a,o as s,f as g,F as k,p as R,q as w,c as L,b as i,u as G,V as J,v as K,w as l,x as E,j as C,t as I,y as V,z as A,A as M}from"./index-BvmNQ16b.js";var U=y({setup(){const t=N("getContext")(),{t:r}=t.lang;return{t:r}},data(){return{isVisible:!1,form:{url:"",title:""},rules:{url:[{required:!0,message:this.t("insertNetworkImageDialog.urlFieldIsEmptyErr"),trigger:"blur"},{pattern:/^(http|https):\/\/.+$/,message:this.t("insertNetworkImageDialog.urlFieldIsInvalidErr"),trigger:"change"}]}}},methods:{hide(){this.isVisible=!1},open(){this.form.url="",this.form.title="",this.isVisible=!0},ok(){this.$refs.form.validate(e=>{e&&(this.$emit("ok",this.form.url,this.form.title),this.hide())})}}});function Q(e,t,r,d,n,v){const u=a("el-input"),c=a("el-form-item"),f=a("el-form"),h=a("el-button"),$=a("el-space"),m=a("el-dialog");return s(),L(m,{modelValue:e.isVisible,"onUpdate:modelValue":t[4]||(t[4]=o=>e.isVisible=o),title:e.t("insertNetworkImageDialog.title"),"max-width":"600px"},{footer:l(()=>[i($,null,{default:l(()=>[i(h,{type:"info",onClick:t[2]||(t[2]=o=>e.hide())},{default:l(()=>[C(I(e.t("insertNetworkImageDialog.cancel")),1)]),_:1}),i(h,{type:"primary",onClick:t[3]||(t[3]=o=>e.ok())},{default:l(()=>[C(I(e.t("insertNetworkImageDialog.ok")),1)]),_:1})]),_:1})]),default:l(()=>[i(f,{model:e.form,rules:e.rules,"label-width":"auto",ref:"form"},{default:l(()=>[i(c,{label:e.t("insertNetworkImageDialog.urlField"),prop:"url"},{default:l(()=>[i(u,{modelValue:e.form.url,"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.url=o),placeholder:e.t("insertNetworkImageDialog.urlFieldPlaceHolder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(c,{label:e.t("insertNetworkImageDialog.titleField"),prop:"title"},{default:l(()=>[i(u,{modelValue:e.form.title,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.title=o)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}U.render=Q;U.__file="src/ElementToolbar/ImageBtn/InsertNetworkImageDialog.vue";var B=y({setup(){const t=N("getContext")(),{t:r}=t.lang,{command:d}=t.editor;return t.lang.print(),{command:d,t:r}},components:{InsertNetworkImageDialog:U},props:{fnUploadImage:{type:Function,required:!1}},methods:{handleDropdownMenuCommand(e){e==="insertNetworkImage"?this.showNetworkImageDialog():this.showUploadDialog()},showNetworkImageDialog(){console.log(this.$refs),this.$refs.networkImageDialog.open()},insertNetworkImage(e,t){this.command("image",{url:e,title:t})},showUploadDialog(){const e=this.$refs.file;e.focus(),e.click()},async uploadLocalImage(){var t;const e=this.$refs.file;if((t=e.files)!=null&&t.length){let r=window.URL.createObjectURL(e.files[0]);this.fnUploadImage&&(r=await this.fnUploadImage(e.files[0])),this.command("image",{title:"",url:r})}}}});const W=e=>(A("data-v-77ab9da6"),e=e(),M(),e),X=W(()=>V("i",{class:"mdi mdi-image"},null,-1));function Y(e,t,r,d,n,v){const u=a("el-button"),c=a("el-dropdown-item"),f=a("el-dropdown-menu"),h=a("el-dropdown"),$=a("insert-network-image-dialog");return s(),g(k,null,[i(h,{onCommand:e.handleDropdownMenuCommand},{dropdown:l(()=>[i(f,null,{default:l(()=>[i(c,{command:"insertNetworkImage"},{default:l(()=>[C(I(e.t("toolbar.insertNetworkImage")),1)]),_:1}),i(c,{command:"uploadLocalImage"},{default:l(()=>[C(I(e.t("toolbar.uploadLocalImage")),1)]),_:1})]),_:1})]),default:l(()=>[i(u,{text:"",class:"btn"},{icon:l(()=>[X]),_:1})]),_:1},8,["onCommand"]),w(" the network image dialog "),i($,{ref:"networkImageDialog",onOk:e.insertNetworkImage},null,8,["onOk"]),w(" the upload image dialog "),V("input",{type:"file",ref:"file",onChange:t[0]||(t[0]=m=>e.uploadLocalImage()),accept:"image/*",style:{display:"none"}},null,544)],64)}function x(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var d=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",r==="top"&&d.firstChild?d.insertBefore(n,d.firstChild):d.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Z=`
.btn[data-v-77ab9da6] {
  outline: none !important;
}
`;x(Z);B.render=Y;B.__scopeId="data-v-77ab9da6";B.__file="src/ElementToolbar/ImageBtn/ImageButton.vue";var F=y({setup(){const t=N("getContext")(),{t:r}=t.lang;return{t:r}},data(){return{isVisible:!1,form:{url:"",title:""},rules:{url:[{required:!0,message:this.t("insertLinkDialog.urlFieldIsEmptyErr"),trigger:"blur"},{pattern:/^(http|https):\/\/.+$/,message:this.t("insertLinkDialog.urlFieldIsInvalidErr"),trigger:"change"}]}}},methods:{hide(){this.isVisible=!1},open(){this.form.url="",this.form.title="",this.isVisible=!0},ok(){this.$refs.form.validate(e=>{e&&(this.$emit("ok",this.form.url,this.form.title),this.hide())})}}});function ee(e,t,r,d,n,v){const u=a("el-input"),c=a("el-form-item"),f=a("el-form"),h=a("el-button"),$=a("el-space"),m=a("el-dialog");return s(),L(m,{modelValue:e.isVisible,"onUpdate:modelValue":t[4]||(t[4]=o=>e.isVisible=o),title:e.t("insertLinkDialog.title"),"max-width":"600px"},{footer:l(()=>[i($,null,{default:l(()=>[i(h,{type:"info",onClick:t[2]||(t[2]=o=>e.hide())},{default:l(()=>[C(I(e.t("insertLinkDialog.cancel")),1)]),_:1}),i(h,{type:"primary",onClick:t[3]||(t[3]=o=>e.ok())},{default:l(()=>[C(I(e.t("insertLinkDialog.ok")),1)]),_:1})]),_:1})]),default:l(()=>[i(f,{model:e.form,rules:e.rules,"label-width":"auto",ref:"form"},{default:l(()=>[i(c,{label:e.t("insertLinkDialog.urlField"),prop:"url"},{default:l(()=>[i(u,{modelValue:e.form.url,"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.url=o),placeholder:e.t("insertLinkDialog.urlFieldPlaceHolder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(c,{label:e.t("insertLinkDialog.titleField"),prop:"title"},{default:l(()=>[i(u,{modelValue:e.form.title,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.title=o)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}F.render=ee;F.__file="src/ElementToolbar/LinkBtn/InsertLinkDialog.vue";var q=y({setup(){const t=N("getContext")(),{t:r}=t.lang,{command:d}=t.editor;return{command:d,t:r}},components:{InsertLinkDialog:F},methods:{insertLink(e,t){this.command("link",{title:t,url:e})},showLinkDialog(){this.$refs.insertLinkDialog.open()}}});const te=V("i",{class:"mdi mdi-link-variant"},null,-1);function oe(e,t,r,d,n,v){const u=a("el-button"),c=a("el-tooltip"),f=a("insert-link-dialog");return s(),g(k,null,[i(c,{content:e.t("toolbar.link"),placement:"bottom"},{default:l(()=>[i(u,{text:"",onClick:e.showLinkDialog},{icon:l(()=>[te]),_:1},8,["onClick"])]),_:1},8,["content"]),i(f,{ref:"insertLinkDialog",onOk:e.insertLink},null,8,["onOk"])],64)}q.render=oe;q.__file="src/ElementToolbar/LinkBtn/LinkButton.vue";var T=y({setup(){const t=N("getContext")(),{t:r}=t.lang;return{t:r}},data:function(){return{rowNum:10,colNum:10,minRowNum:10,minColNum:10,curRow:0,curCol:0,timer:0}},methods:{setCurrentRowAndCol(e,t){this.curRow=e,this.curCol=t,this.rowNum>this.minRowNum&&this.rowNum>e&&this.rowNum--,this.colNum>this.minColNum&&this.colNum>t&&this.colNum--,this.rowNum<=e&&this.rowNum++,this.colNum<=t&&this.colNum++},hide(){this.$emit("input",!1)},cancel(){this.hide()},ok(){this.$emit("ok",{row:this.curRow,col:this.curCol})},doNothing(){}},mounted(){this.timer=setInterval(()=>{var e,t,r;!((r=(t=(e=this.$refs)==null?void 0:e.table)==null?void 0:t.matches)!=null&&r.call(t,":hover"))&&this.curRow>0&&this.setCurrentRowAndCol(0,0)},200)},beforeUnmount(){clearInterval(this.timer)}});const ne={class:"table",ref:"table"},ie=["onMouseover"];function le(e,t,r,d,n,v){return s(),g("div",null,[C(I(e.curRow>0?e.t("insertTableBoard.info",{row:e.curRow.toString(),col:e.curCol.toString()}):e.t("insertTableBoard.title"))+" ",1),V("table",ne,[(s(!0),g(k,null,R(e.rowNum,u=>(s(),g("tr",{key:u},[(s(!0),g(k,null,R(e.colNum,c=>(s(),g("td",{key:c,class:E(["cell",{highlight:u<=e.curRow&&c<=e.curCol}]),onMouseover:f=>e.setCurrentRowAndCol(u,c),onClick:t[0]||(t[0]=f=>e.ok())},null,42,ie))),128))]))),128))],512)])}var re=`
.table[data-v-654a3a5b] {
  border-spacing: 2px;
}
.cell[data-v-654a3a5b] {
  width: 20px;
  height: 20px;
  border: 1px solid black !important;
}
.highlight[data-v-654a3a5b] {
  background-color: lightblue;
}
`;x(re);T.render=le;T.__scopeId="data-v-654a3a5b";T.__file="src/ElementToolbar/TableBtn/InsertTableBoard.vue";var z=y({setup(){const t=N("getContext")(),{t:r}=t.lang,{command:d}=t.editor;return{command:d,t:r}},components:{InsertTableBoard:T},data:function(){return{}},methods:{insertTable(e,t){this.command("table",{row:e,col:t})}}});const ae=V("i",{class:"mdi mdi-table-plus"},null,-1);function se(e,t,r,d,n,v){const u=a("el-button"),c=a("insert-table-board"),f=a("el-popover");return s(),L(f,{placement:"bottom",trigger:"hover",width:"auto"},{reference:l(()=>[i(u,{text:""},{default:l(()=>[ae]),_:1})]),default:l(()=>[i(c,{onOk:t[0]||(t[0]=h=>e.insertTable(h.row,h.col))})]),_:1})}z.render=se;z.__file="src/ElementToolbar/TableBtn/TableButton.vue";const de=e=>(A("data-v-27d63386"),e=e(),M(),e),me={class:"toolbar"},ue=de(()=>V("div",{class:"spacer"},null,-1));var O=y({__name:"ElementToolbar",props:{items:{type:Array,required:!1,default:()=>["undo","redo","divider","bold","italic","strikethrough","underline","subscript","superscript","mark","heading1","heading2","heading3","divider","bulletedList","numberedList","quote","codeBlock","link","image","horizontalRule","table","spacer","preview","toc"]},fnUpload:{type:null,required:!1}},setup(e){const t=e,d=N("getContext")(),{t:n}=d.lang,{command:v}=d.editor,{getMode:u,setMode:c}=d,f={divider:{name:"divider"},spacer:{name:"spacer"},undo:{name:"undo",icon:"mdi mdi-undo",cmd:"undo",tip:()=>n("toolbar.undo")},redo:{name:"redo",icon:"mdi mdi-redo",cmd:"redo",tip:()=>n("toolbar.redo")},bold:{name:"bold",icon:"mdi mdi-format-bold",cmd:"bold",tip:()=>n("toolbar.bold")},italic:{name:"italic",icon:"mdi mdi-format-italic",cmd:"italic",tip:()=>n("toolbar.italic")},strikethrough:{name:"strikethrough",icon:"mdi mdi-format-strikethrough",cmd:"strikethrough",tip:()=>n("toolbar.strikethrough")},underline:{name:"underline",icon:"mdi mdi-format-underline",cmd:"underline",tip:()=>n("toolbar.underline")},subscript:{name:"subscript",icon:"mdi mdi-format-subscript",cmd:"subscript",tip:()=>n("toolbar.subscript")},superscript:{name:"superscript",icon:"mdi mdi-format-superscript",cmd:"superscript",tip:()=>n("toolbar.superscript")},mark:{name:"mark",icon:"mdi mdi-format-color-highlight",cmd:"mark",tip:()=>n("toolbar.mark")},heading1:{name:"heading1",icon:"mdi mdi-format-header-1",cmd:"heading1",tip:()=>n("toolbar.heading1")},heading2:{name:"heading2",icon:"mdi mdi-format-header-2",cmd:"heading2",tip:()=>n("toolbar.heading2")},heading3:{name:"heading3",icon:"mdi mdi-format-header-3",cmd:"heading3",tip:()=>n("toolbar.heading3")},heading4:{name:"heading4",icon:"mdi mdi-format-header-",cmd:"heading4",tip:()=>n("toolbar.heading4")},heading5:{name:"heading5",icon:"mdi mdi-format-header-5",cmd:"heading5",tip:()=>n("toolbar.heading5")},heading6:{name:"heading6",icon:"mdi mdi-format-header-6",cmd:"heading6",tip:()=>n("toolbar.heading6")},bulletedList:{name:"bulletedList",icon:"mdi mdi-format-list-bulleted",cmd:"bulletedList",tip:()=>n("toolbar.bulletedList")},numberedList:{name:"numberedList",icon:"mdi mdi-format-list-numbered",cmd:"numberedList",tip:()=>n("toolbar.numberedList")},quote:{name:"quote",icon:"mdi mdi-format-quote-close",cmd:"quote",tip:()=>n("toolbar.quote")},codeBlock:{name:"codeBlock",icon:"mdi mdi-code-tags",cmd:"codeBlock",tip:()=>n("toolbar.codeBlock")},horizontalRule:{name:"horizontalRule",icon:"mdi mdi-minus",cmd:"horizontalRule",tip:()=>n("toolbar.horizontalRule")},image:{name:"image",vnode:()=>i(B,{fnUploadImage:t.fnUpload},null)},link:{name:"link",comp:q},table:{name:"table",comp:z},preview:{name:"preview",icon:()=>u().split("|").includes("viewer")?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline",exec:()=>{const o=u().split("|");if(o.includes("viewer")){const _=o.filter(D=>D!=="viewer").join("|");c(_)}else{const _=o[o.length-1]==="toc"?"editor|viewer|toc":"editor|viewer";c(_)}},tip:()=>u().split("|").includes("viewer")?n("toolbar.closePreview"):n("toolbar.openPreview")},toc:{name:"toc",icon:"mdi mdi-text-box-outline",exec:()=>{const o=u().split("|"),b=o[o.length-1],_=[...o];b==="toc"?_.pop():_.push("toc");const D=_.join("|");c(D)},tip:()=>n("toolbar.toc")}},h=P(()=>{const m=[];return t.items.forEach(o=>{if(typeof o=="string")if(f[o]){const b={...f[o]};b!=null&&b.name||(b.name=o),m.push(b);return}else{console.error(`invalid toolbar item: ${o}`);return}if(H(o)){m.push({name:"vnode",vnode:()=>o});return}if(typeof o=="function"){m.push({name:"vnode",vnode:o});return}if(typeof o.render=="function"){m.push({name:"component",comp:o});return}m.push(o)}),m});function $(m){m.exec?m.exec():m.cmd&&v(m.cmd)}return(m,o)=>{const b=a("el-divider"),_=a("el-button"),D=a("el-tooltip");return s(),g("div",me,[(s(!0),g(k,null,R(h.value,(p,S)=>{var j;return s(),g(k,{key:p.name+S},[w(" divider "),p.name==="divider"?(s(),L(b,{key:0,direction:"vertical"})):p.name==="spacer"?(s(),g(k,{key:1},[w(" spacer "),ue],2112)):p.vnode?(s(),g(k,{key:2},[w(" custom button "),i(G(J),{vnodes:[p.vnode()]},null,8,["vnodes"])],2112)):p.comp?(s(),g(k,{key:3},[w(" custom component "),(s(),L(K(p.comp)))],2112)):(s(),g(k,{key:4},[w(" button "),(s(),L(D,{key:(p.name??"")+S,content:typeof p.tip=="string"?p.tip:(j=p.tip)==null?void 0:j.call(p)},{default:l(()=>[i(_,{onClick:pe=>$(p),text:""},{icon:l(()=>[typeof p.icon=="string"?(s(),g("i",{key:0,class:E(p.icon)},null,2)):typeof p.icon=="function"?(s(),g("i",{key:1,class:E(p.icon())},null,2)):w("v-if",!0)]),_:2},1032,["onClick"])]),_:2},1032,["content"]))],2112))],64)}),128))])}}}),ce=`
.toolbar[data-v-27d63386] {
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
}
.toolbar > button[data-v-27d63386], .toolbar > div[data-v-27d63386] {
  flex-shrink: 0;
  flex-grow: 0;
}
.toolbar > .spacer[data-v-27d63386] {
  flex-shrink: 1;
  flex-grow: 1;
}
[data-v-27d63386] .el-button + .el-button {
  margin-left: 0;
}
`;x(ce);O.__scopeId="data-v-27d63386";O.__file="src/ElementToolbar/ElementToolbar.vue";export{O as s};
